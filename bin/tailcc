#!/usr/bin/perl
use strict;
use warnings;

my $host;
if(@ARGV == 2){
  $host = shift;
}else{
  $host = 'dev';
}
my $server = "$host.escribe.com";
my $user = 'ewolk';


my $arg = shift;

my $project;
if($arg eq 'ddall'){
  $project = 'DataDictionary-Build-ALL';
}elsif($arg eq 'cldefs'){
  $project = 'DataDictionary-Build-CHOICELIST_DEFS';
}elsif($arg eq 'choicelists'){
  $project = 'DataDictionary-Build-CHOICELISTS';
}elsif($arg eq 'doctypes'){
  $project = 'DataDictionary-Build-DOCTYPES';
}elsif($arg eq 'entryforms'){
  $project = 'DataDictionary-Build-ENTRYFORMS';
}elsif($arg eq 'fields'){
  $project = 'DataDictionary-Build-FIELDS';
}elsif($arg eq 'dev'){
  $project = 'eScribePortal-dev';
}else{
  $project = $arg;
}


my $file = "/opt/cruisecontrol/projects/$project/antBuilderOutput.log";
my $cmd = "cat $file; tail -F $file";

exec "ssh $user\@$server '$cmd'";

