#!/usr/bin/perl
use strict;
use warnings;

my $ci = 0;
if(@ARGV > 0 && $ARGV[0] =~ '-i'){
  $ci = 1;
  shift;
}

my $re = shift() || '';
if($ci){
  $re = qr/$re/i;
}else{
  $re = qr/$re/;
}
die "Usage: $0 [-i] <perl-regex>\n" if @ARGV > 0;

for my $path(split /:/, $ENV{PATH}){
  my @execs = `ls $path`;
  for my $exec(@execs){
    chomp $exec;
    if($exec =~ /$re/){
      print "$path/$exec\n";
    }
  }
}
