#!/usr/bin/perl
use strict;
use warnings;

print "installing ghc and haskell-platform from the repos\n";
system "sudo apt-get install ghc haskell-platform";
system "sudo apt-get install xmonad libghc6-xmonad-contrib-dev";
print "\n\n\n";

my @cabalPackages = qw(
  runghc
  regex-pcre-builtin unixutils utf8-string monad-loops

  hlint
  cmdargs pureMD5 transformers tagged semigroups data-default dlist entropy
  cereal X11 syb binary largeword posix-timer split
);

my @xmonadDeps = qw(
  cdbs dctrl-tools fdupes html-xml-utils intltool libexpat1-dev libffi-dev
  libfontconfig1-dev libfreetype6-dev libxft-dev libxinerama-dev libxrender-dev
  python-scour x11proto-render-dev x11proto-xinerama-dev xutils-dev
);

print "xmonad deps: @xmonadDeps\n";
system "sudo apt-get install @xmonadDeps";
  
#cp the %-named files in .xmonad to its place
for my $file (`ls \$HOME/.xmonad/%*`){
  chomp $file;
  my $loc = $file;
  $loc =~ s/^[^%]*%/%/;
  $loc =~ s/%/\//g;
  system "sudo cp $file $loc";
}

print "\n\n\ncabal packages: @cabalPackages\n";
system "cabal update";
system "cabal install @cabalPackages";
