#!/usr/bin/perl
use warnings;
use strict;
use ScriptScript;

sub main(@) {
    getRoot @_;

    my $confDir = shift || guessBackupDir;
    my $netDir  = shift || "Code/net";
    $netDir = "$confDir/$netDir" if not -d $netDir;

    ### install net
    cd $netDir;
    run "./install.pl";
    cd $confDir;
    run "cp", "-a", $_, $ENV{HOME} for qw(wifi.conf wifi-auto.conf);

    ### disable NetworkManager and connect
    tryrun qw(service network-manager stop);
    run "/usr/local/bin/wauto";
}

main @ARGV;

