#!/usr/bin/perl
use strict;
use warnings;

my $file = "/tmp/klomp-bar";
my $default = 'local';

sub get(){
  if(not -e $file){
    return $default;
  }else{
    my $s = `cat $file`;
    chomp $s;
    return $s;
  }
}

sub set($){
  my $s = shift;
  if($s eq 'local'){
    system "rm", $file;
  }else{
    system "echo $s > $file";
  }
}

sub main(@){
  my $cur = get;
  for my $arg(@_){
    if($arg ne $cur){
      set $arg;
      last;
    }
  }
}

&main(@ARGV);
