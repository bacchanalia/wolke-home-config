#!/usr/bin/perl
use strict;
use warnings;
use ScriptScript;

sub main(@) {
    my $backupDir = shift || guessBackupDir;
    my $git = 'git@github.com:bacchanalia/zuserm-home.git';

    # TODO get newer git
    run qw(sudo apt-get -y install git);

    run "rsync", "-avc", "$backupDir/.gitconfig", $ENV{HOME};
    run "rsync", "-avc", "$backupDir/.ssh"      , $ENV{HOME};

    cd $ENV{HOME};
    run "git", "clone", $git, "git-home";
    run qw(rsync -avc git-home/ .);
    run qw(rm -rf git-home);
}

main @_;

