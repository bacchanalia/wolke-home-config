#!/usr/bin/perl
use strict;
use warnings;
use URI::file;

if($#ARGV == 0){
  my $dir = shift;
  system "gvfs-info -a metadata::custom-icon $dir";
}elsif($#ARGV == 1){
  my $dir = shift;
  my $icon = shift;
  
  #fullpath of icon
  $icon =~ s/"/\\"/g;
  $icon = `echo -n "\$( readlink -f "\$( dirname "$icon" )" )/\$( basename "$icon" )"`;
  
  #url of icon
  $icon = URI::file->new($icon);
  system "gvfs-set-attribute \"$dir\" metadata::custom-icon \"$icon\"\n";
}else{
  die "Usage:
  $0 DIR_PATH
  $0 DIR_PATH ICON_PATH

  A single argument lists the current custom icon of that folder.
  Two arguments sets the current icon\n";
}

