#!/usr/bin/perl
use strict;
use warnings;

sub run(@);

my $arcBees = "https://plus.google.com/hangouts/_/arcbees.com";

my %hangouts = (
  standup => "$arcBees/daily-standup",
);
my $okHangouts = join "|", sort keys %hangouts;
my $defaultHangout = "standup";

my $usage = "Usage: $0 [$okHangouts]  {default is $defaultHangout}\n";

sub main(@){
  my $hangout = shift() || $defaultHangout;
  die $usage if @_ > 0 or $hangout !~ /^($okHangouts)$/;

  run "sudo", "modprobe", "-r", "uvcvideo";
  run "chromium", "--url", $hangouts{$hangout};
  run "pkill", "-f", "Google";
}

sub run(@){
  print "@_\n";
  system @_;
}

&main(@ARGV);
