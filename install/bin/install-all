#!/usr/bin/perl
use strict;
use warnings;
use lib `dirname $0 | tr -d '\n'`;
use ScriptScript;

sub runrel(@) { run relToScript(shift), @_; }

sub main(@) {
    getRoot @_;

    my $backupDir = shift || guessBackupDir;

    ### set up desktop envitonment
    runrel "get-on-wifi", $backupDir;
    runrel "set-up-sudoers";
    runrel "backup-home";
    runrel "sync-home", $backupDir;
    runrel "install-apt-packages", "[1-4]";
    runrel "sync-root";
    runrel "install-git";
    runrel "install-xmonad-taffybar";
    runrel "set-up-autologin";

    ### set up others
    runrel "install-urxvt";
    runrel "install-pidgin-notify";
    runrel "install-klomp";
    runrel "install-acpi";
    runrel "set-up-grub";
    runrel "set-up-plymouth";
    # fstab

    ### long running commands
    runrel "install-user-haskell";
    installFromDir "$ENV{HOME}/Code/Haskell/KitchenSink";
    runrel "sync-late";
    runrel "install-apt-packages", "tex";

    # update all
    #   apt
    #   cabal
    #   repos
    #   flacs
    #   klomp-update
}

main @ARGV;

