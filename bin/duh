#!/usr/bin/perl
use strict;
use warnings;

my @files;
my @sizes;
my $largest = 0;

if($#ARGV < 0){
  die "Usage: $0 file file file..\n";
}
for my $arg(@ARGV){
  my $du = `du -s "$arg"`;
  $du =~ /^([0-9]+)\t(.+)\n$/;
  push @files, $2;
  push @sizes, $1;
  if($1 > $largest){
    $largest = $1;
  }
}

sub digs($){
  1 + int (log(scalar shift) / (log 10));
}

my $maxdigs = digs $largest;

my @disp;
for(my $i=0; $i<@files; $i++){
  my $file = $files[$i];
  my $size = $sizes[$i];
  my $d = digs $size;
  $size = '0' x ($maxdigs - $d) . $size;
  push @disp, "$size\t$file";
}

@disp = sort @disp;
$, = "\n";
print @disp;
print "\n";
