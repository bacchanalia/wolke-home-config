#!/usr/bin/perl
use strict;
use warnings;

my $dev = `wlan`;
chomp $dev;

#my $iwlist = `sudo iwlist $dev scan`;
my $iwlist = `cat /home/wolke/scan`;
$iwlist =~ s/^$dev\s*Scan completed :\n//;

my @cells = split /          Cell \d+ - /, $iwlist;
shift @cells;

sub formatCell($){
  my $cell = shift;
  $cell =~ /\s*ESSID:"(.*)"/;
  $cell =~ /\s*Quality=(\d+)\/(\d+)/;
  my $quality = $1/$2;
  return "$1 $quality\n";
}

print map {formatCell $_} @cells;

