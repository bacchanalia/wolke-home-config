#!/usr/bin/perl
use strict;
use warnings;

my $DIR = '/home/wolke/Desktop/Euler';

my $num = shift;

if($num =~ /^[0-9]+$/){
  if($num < 10){
    $num = "00$num";
  }elsif($num <100){
    $num = "0$num";
  }
}elsif($num eq 'latest' or $num eq 'next'){
  my $max = 0;
  for my $prob(split /\n/, `ls -1 $DIR/problem*.hs`){
    $prob =~ /problem([0-9]+).hs/;
    if($1 > $max){
      $max = $1;
    }
  }
  if($num eq 'next'){
    $max++;
  }
  $num = $max;
}

my $file = "$DIR/problem$num.hs";

if(not -e $file){
  my $template = "$DIR/template.hs";
  system "cp $template $file";
}

exec "gvim $DIR/problem$num.hs";

