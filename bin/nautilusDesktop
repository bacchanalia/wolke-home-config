#!/usr/bin/perl
use strict;
use warnings;

my $attribute = '/apps/nautilus/preferences/show_desktop';
my $onVal = 'true';
my $offVal = 'false';
my $type = 'boolean';

my $arg = lc shift;

my $val;
if($arg eq 'on'){
  $val = $onVal;
}elsif($arg eq 'off'){
  $val = $offVal;
}elsif($arg eq 'get'){
  system "gconftool-2 --get $attribute";
  exit 0;
}elsif($arg eq 'toggle'){
  my $curVal = `$0 get`;
  chomp $curVal;
  if($curVal eq $offVal){
    $val = $onVal;
  }else{
    $val = $offVal;
  }
}else{
  die "Usage: $0 on|off|get|toggle\n";
}

#set filemgr = ''
print `gconftool-2 --set /desktop/gnome/session/required_components/filemanager --type string ""`;

#set filemg = 'nautilus'
#print `gconftool-2 --set /desktop/gnome/session/required_components/filemanager --type string "nautilus"`

print `gconftool-2 --set $attribute --type $type "$val"`;
system "nautilus --no-default-window";

