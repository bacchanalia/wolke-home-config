#!/usr/bin/perl
use strict;
use warnings;

sub main(@){
  my $arg = shift;
  die "Usage: $0 --on|--off\n" if @_ != 0 or not defined $arg;

  if($arg eq "--off"){
    system "klomp-cmd", "stop";
    system "pkill", "-9", "-f", "klomp-lcd";
    system "pi lcd --off";
  }elsif($arg eq "--on"){
    system "klomp-mnt";
    system "pkill", "-9", "-f", "klomp-lcd";
    system "pi lcd --on";
    system "nohup klomp-lcd --ipmagic=raspi >/dev/null 2>/dev/null &";
    system "klomp-cmd", "start";
  }
}

&main(@ARGV);
