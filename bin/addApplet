#!/usr/bin/perl
use strict;
use warnings;

my $item = 'applet_7';
sub set($$){
  my $key = shift;
  my $type = shift;
  my $value = shift;
  system "gconftool-2 --set $key --type $type '$value'";
}

my $applet_dir = "/apps/panel/applets/$applet";
set "$applet_dir/menu_path", 'applications:/', 'string';
set "$applet_dir/launcher_location", '', 'string';
set "$applet_dir/bonobo_iid", 'OAFIID:GNOME_StickyNotesApplet', 'string';
set "$applet_dir/launcher_location", '', 'string';
set "$applet_dir/launcher_location", '', 'string';
set "$applet_dir/launcher_location", '', 'string';
set "$applet_dir/launcher_location", '', 'string';
set "$applet_dir/launcher_location", '', 'string';
  = 
  = 
 custom_icon = 
 locked = false
 panel_right_stick = false
 object_type = bonobo-applet
 use_custom_icon = false
 tooltip = 
 toplevel_id = top_panel_screen0
 action_type = lock
 use_menu_path = false
 position = 456
 attached_toplevel_id = 



my $attribute = '/apps/panel/general/applet_id_list';
my $type = 'list';

my $val = `gconftool-2 --get $attribute`;
$val =~ s/^\[(.*)\]$/$1/s;
$val =~ s/\n//g;

my @values = split ',', $val;
for(my $i=0; $i<=$#values; $i++){
  if($values[$i] eq $item){
    delete $values[$i];
  }
}

my $missing = '[' . join(',', @values) . ']';
$missing =~ s/,,+/,/g;

push @values, $item;

$val = '[' . join(',', @values) . ']';

print `gconftool-2 --get $attribute`;
print `gconftool-2 --set $attribute --type $type --list-type string "$missing"`;
print `gconftool-2 --get $attribute`;
print `gconftool-2 --set $attribute --type $type --list-type string "$val"`;
print `gconftool-2 --get $attribute`;

