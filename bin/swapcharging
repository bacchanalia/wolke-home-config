#!/usr/bin/perl
use strict;
use warnings;

my $bat0state = `smapi-battaccess -g 0 state`;
my $bat1state = `smapi-battaccess -g 1 state`;

if($bat0state == 1){
  print "bat0 was charging, swapping\n";
  system "smapi-battaccess -s 0 inhibit_charge_minutes 1";
  system "smapi-battaccess -s 1 inhibit_charge_minutes 0";
}elsif($bat1state == 1){
  print "bat1 was charging, swapping\n";
  #if this looks strange, thats because it is; (1 1) (0 0) makes more sense
  system "smapi-battaccess -s 0 inhibit_charge_minutes 1";
  system "smapi-battaccess -s 0 inhibit_charge_minutes 0";
}else{
  print "neither was charging, doing nothing\n";
}
