#!/usr/bin/perl
use strict;
use warnings;

my $src = '/home/wolke';
my $dest = '/media/BACKUP_HOME/';

if(not -e $src){
  die "Source not found: $src\n";
}
if(not -e $dest){
  die "Destination not found: $dest\n";
}

my @excludes = (
  '.gvfs',
  'wolke-home-config/.xmonad/workspace-images',
  'wolke-home-config/.xmonad/workspace-images/*.log',
  'wolke-home-config/.xmonad/workspace-images/*.xbm',
  'wolke-home-config/.xmonad/workspace-images/*.xpm',
);
my $exclude = '';
for my $ex(@excludes){
  $exclude .= "--exclude=$ex ";
}


my $cmd = "sudo rsync -av --progress --delete-during $exclude $src $dest";
print "Press enter to run, or ctrl+c to quit:\n";
print "$cmd\n";
if(readline){
  exec $cmd;
}
