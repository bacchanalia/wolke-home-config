#!/usr/bin/perl
use strict;
use warnings;

my $file = '/usr/lib/nspluginwrapper/i386/linux/npviewer';

my $fixLine = "export GDK_NATIVE_WINDOWS=1\n";

open IN, "< $file" or die "Could not open $file for reading: $!";
my @lines = <IN>;
close IN;


my $new = $lines[0];
$new .= $fixLine; 
for(my $i=1; $i<@lines; $i++){
  my $line = $lines[$i];
  if($line ne $fixLine){
    $new .= $line;
  }
}

open OUT, "> $file" or die "Could not open $file for writing: $!";
print OUT $new;
close OUT;

