#!/usr/bin/perl
use strict;
use warnings;
use lib `dirname $0 | tr -d '\n'`;
use ScriptScript;

sub main(@) {
    getRoot @_;

    my $backupDir = shift || guessBackupDir;

    ### set up desktop envitonment
    run "./get-on-wifi", $backupDir;
    run "./set-up-sudoers";
    run "./backup-home";
    run "./sync-home", $backupDir;
    run "./install-apt-packages", "[1-4]";
    run "./sync-root";
    run "./install-git";
    run "./install-xmonad-taffybar";
    run "./set-up-autologin";

    ### set up others
    run "./install-urxvt";
    run "./install-klomp";
    run "./set-up-grub";
    # run "set-up-plymouth";
    # run "install-notify";

    ### long running commands
    # userhaskell
    #   cabal packages
    #   KitchenSink
    run "rsync", "-avc", "$backupDir/Music", "$ENV{HOME}";
    run "./install-apt-packages", "tex";

    # update all
    #   apt
    #   cabal
    #   repos
    #   flacs
    #   klomp-update
}

main @ARGV;

