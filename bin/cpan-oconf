#!/usr/bin/perl
use strict;
use warnings;

if(@ARGV != 3){
  die "Usage: $0 <Config.pm-file-path> <config-item> <value>\n";
}
my $file = shift;
my $config = shift;
my $value = shift;

open FH, "< $file" or die "could not read $file\n";
my @lines = <FH>;
close FH;

$value =~ s/\[/\\[/;
$value =~ s/\]/\\]/;
$value = "q[$value]";

for my $line(@lines){
  if($line =~ / ( \s* '$config' \s* => \s* )  (.*)  ( , \s* ) $/x){
    print "old: $1$2$3";
    print "new: $1$value$3";
    print "\n";
    last;
  }
}

open FH, "> $file" or die "could not write $file\n";
print FH @lines;
close FH;

